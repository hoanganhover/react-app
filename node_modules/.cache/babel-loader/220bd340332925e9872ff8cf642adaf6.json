{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\Admin\\\\Desktop\\\\Learn_Reactjs\\\\14_Cart\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport * as types from './../constants/ActionType';\nvar data = JSON.parse(localStorage.getItem('CART'));\nvar initialState = data ? data : [];\n/*var initialState = [\r\n    {\r\n        product :{\r\n            id :1,\r\n            name : 'Iphone 7 plus',\r\n            image : 'https://store.storeimages.cdn-apple.com/4974/as-images.apple.com/is/image/AppleInc/aos/published/images/H/H0/HH0H2/HH0H2?wid=445&hei=445&fmt=jpeg&qlt=95&op_sharpen=0&resMode=bicub&op_usm=0.5,0.5,0,0&iccEmbed=0&layer=comp&.v=K7ik72',\r\n            description : 'Apple',\r\n            price :500,\r\n            inventory : 10,\r\n            rating:3\r\n        },\r\n        quantity : 5\r\n    },\r\n    {\r\n        product :{\r\n            id :3,\r\n            name : 'Iphone 9 plus',\r\n            image : 'https://store.storeimages.cdn-apple.com/4974/as-images.apple.com/is/image/AppleInc/aos/published/images/H/H0/HH0H2/HH0H2?wid=445&hei=445&fmt=jpeg&qlt=95&op_sharpen=0&resMode=bicub&op_usm=0.5,0.5,0,0&iccEmbed=0&layer=comp&.v=K7ik72',\r\n            description : 'Apple',\r\n            price :300,\r\n            inventory : 5,\r\n            rating:5\r\n        },\r\n        quantity : 3\r\n    }\r\n];*/\n\nvar cart = function cart() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var product = action.product,\n      quantity = action.quantity;\n  var index = -1;\n\n  switch (action.type) {\n    case types.ADD_TO_CART:\n      //console.log(action);\n      index = findProductCart(state, product);\n\n      if (index !== -1) {\n        state[index].quantity += quantity;\n      } else {\n        state.push({\n          product: product,\n          quantity: quantity\n        });\n      }\n\n      localStorage.setItem('CART', JSON.stringify(state));\n      return _toConsumableArray(state);\n\n    default:\n      return _toConsumableArray(state);\n  }\n};\n\nvar findProductCart = function findProductCart(cart, product) {\n  var index = -1;\n\n  if (cart.length > 0) {\n    for (var i = 0; i < cart.length; i++) {\n      if (cart[i].product.id === product.id) {\n        index = i;\n        break;\n      }\n    }\n  }\n\n  return index;\n};\n\nexport default cart;","map":{"version":3,"sources":["C:\\Users\\Admin\\Desktop\\Learn_Reactjs\\14_Cart\\src\\reducers\\cart.js"],"names":["types","data","JSON","parse","localStorage","getItem","initialState","cart","state","action","product","quantity","index","type","ADD_TO_CART","findProductCart","push","setItem","stringify","length","i","id"],"mappings":";AAAA,OAAO,KAAKA,KAAZ,MAAuB,2BAAvB;AAEA,IAAIC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAX;AACA,IAAIC,YAAY,GAAGL,IAAI,GAAGA,IAAH,GAAS,EAAhC;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA,IAAMM,IAAI,GAAG,SAAPA,IAAO,GAAiC;AAAA,MAAhCC,KAAgC,uEAAxBF,YAAwB;AAAA,MAAVG,MAAU;AAAA,MACrCC,OADqC,GACjBD,MADiB,CACrCC,OADqC;AAAA,MAC7BC,QAD6B,GACjBF,MADiB,CAC7BE,QAD6B;AAE1C,MAAIC,KAAK,GAAG,CAAC,CAAb;;AACA,UAAOH,MAAM,CAACI,IAAd;AACI,SAAKb,KAAK,CAACc,WAAX;AACA;AACAF,MAAAA,KAAK,GAAGG,eAAe,CAACP,KAAD,EAAOE,OAAP,CAAvB;;AACA,UAAGE,KAAK,KAAK,CAAC,CAAd,EAAgB;AACZJ,QAAAA,KAAK,CAACI,KAAD,CAAL,CAAaD,QAAb,IAAyBA,QAAzB;AACH,OAFD,MAGI;AACAH,QAAAA,KAAK,CAACQ,IAAN,CAAW;AACPN,UAAAA,OAAO,EAAPA,OADO;AAEPC,UAAAA,QAAQ,EAARA;AAFO,SAAX;AAIH;;AACDP,MAAAA,YAAY,CAACa,OAAb,CAAqB,MAArB,EAA4Bf,IAAI,CAACgB,SAAL,CAAeV,KAAf,CAA5B;AACA,gCAAYA,KAAZ;;AACA;AAAU,gCAAWA,KAAX;AAfd;AAiBH,CApBD;;AAsBA,IAAIO,eAAe,GAAG,SAAlBA,eAAkB,CAACR,IAAD,EAAMG,OAAN,EAAiB;AACnC,MAAIE,KAAK,GAAG,CAAC,CAAb;;AACA,MAAGL,IAAI,CAACY,MAAL,GAAc,CAAjB,EAAmB;AACf,SAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAEb,IAAI,CAACY,MAAvB,EAAgCC,CAAC,EAAjC,EAAqC;AACjC,UAAGb,IAAI,CAACa,CAAD,CAAJ,CAAQV,OAAR,CAAgBW,EAAhB,KAAwBX,OAAO,CAACW,EAAnC,EAAsC;AAClCT,QAAAA,KAAK,GAACQ,CAAN;AACA;AACH;AACJ;AACJ;;AACD,SAAOR,KAAP;AACH,CAXD;;AAaA,eAAeL,IAAf","sourcesContent":["import * as types from './../constants/ActionType';\r\n\r\nvar data = JSON.parse(localStorage.getItem('CART'));\r\nvar initialState = data ? data :[];\r\n/*var initialState = [\r\n    {\r\n        product :{\r\n            id :1,\r\n            name : 'Iphone 7 plus',\r\n            image : 'https://store.storeimages.cdn-apple.com/4974/as-images.apple.com/is/image/AppleInc/aos/published/images/H/H0/HH0H2/HH0H2?wid=445&hei=445&fmt=jpeg&qlt=95&op_sharpen=0&resMode=bicub&op_usm=0.5,0.5,0,0&iccEmbed=0&layer=comp&.v=K7ik72',\r\n            description : 'Apple',\r\n            price :500,\r\n            inventory : 10,\r\n            rating:3\r\n        },\r\n        quantity : 5\r\n    },\r\n    {\r\n        product :{\r\n            id :3,\r\n            name : 'Iphone 9 plus',\r\n            image : 'https://store.storeimages.cdn-apple.com/4974/as-images.apple.com/is/image/AppleInc/aos/published/images/H/H0/HH0H2/HH0H2?wid=445&hei=445&fmt=jpeg&qlt=95&op_sharpen=0&resMode=bicub&op_usm=0.5,0.5,0,0&iccEmbed=0&layer=comp&.v=K7ik72',\r\n            description : 'Apple',\r\n            price :300,\r\n            inventory : 5,\r\n            rating:5\r\n        },\r\n        quantity : 3\r\n    }\r\n];*/\r\n\r\nconst cart = (state = initialState, action) =>{\r\n    var {product,quantity} = action;\r\n    var index = -1;\r\n    switch(action.type){\r\n        case types.ADD_TO_CART:\r\n        //console.log(action);\r\n        index = findProductCart(state,product);\r\n        if(index !== -1){\r\n            state[index].quantity += quantity;\r\n        }\r\n        else{\r\n            state.push({\r\n                product,\r\n                quantity\r\n            });\r\n        }\r\n        localStorage.setItem('CART',JSON.stringify(state));\r\n        return  [...state];\r\n        default : return [...state];\r\n    }\r\n}\r\n\r\nvar findProductCart = (cart,product) =>{\r\n    var index = -1;\r\n    if(cart.length > 0){\r\n        for(var i = 0; i< cart.length ; i ++){\r\n            if(cart[i].product.id  === product.id){\r\n                index=i;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    return index;\r\n}\r\n\r\nexport default cart;"]},"metadata":{},"sourceType":"module"}